<div class="dropdown dropdown-right">
    <label tabindex="0" class="btn rounded-xl">⠇</label>
    {% if session.get('me') %}
    <ul tabindex="0" class="mt-3 z-[1] p-2 shadow menu dropdown-content bg-base-300 rounded-box lg:w-52 w-48">
        {% if editable %}
        <li>
        <a onclick="edit.showModal()">
        <svg xmlns="http://www.w3.org/2000/svg" height="16" fill="currentColor" viewBox="0 -960 960 960" width="16">
        <path d="M200-200h56l345-345-56-56-345 345v56Zm572-403L602-771l56-56q23-23 56.5-23t56.5 23l56 56q23 23 24 55.5T829-660l-57 57Zm-58 59L290-120H120v-170l424-424 170 170Zm-141-29-28-28 56 56-28-28Z"/>
        </svg>
        Изменить</a>
        </li>
        {% endif %}
        {% if not removable %}
        <li>
        <a onclick="apiplaylists.add_to_library(this, '{{ playlist.uuid }}')"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
          </svg> Добавить</a>
        </li>
        {% endif %}
        {% if removable %}
        <li>
        <a class="text-error" onclick="apiplaylists.delete(this, '{{ playlist.uuid }}')"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
            </svg> Удалить</a>
        </li>
        {% endif %}
        {% if playlists %}
        <div class="divider dropdown-divider divider-primary">Скопировать в</div>
        {% for othplaylist in playlists if playlists %}
        {% if othplaylist.get('uuid') != playlist.get('uuid') %}
        <li>
            <a onclick="apiplaylists.merge(this, uuid, '{{ othplaylist.get('uuid') }}')">
                <figure><img src="{{ othplaylist['tracks'][0].get('thumbnail') if othplaylist.get('tracks') and not othplaylist.get('thumbnail') else othplaylist.get('thumbnail') }}" onerror="this.src='https://cataas.com/cat?type=square&width=300'" width="20" height="20" class="rounded-lg aspect-square"/></figure>
                {{ othplaylist.get('title') }}
            </a>
        </li>
        {% endif %}
        {% endfor %}
        {% endif %}
    </ul>
    {% endif %}
</div>